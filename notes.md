gale-shapley always halts
it must halt on a stable matching

consider implementing preference as a BTreeSet for fast lookup of rank by checking key